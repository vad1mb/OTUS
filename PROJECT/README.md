# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è NEXTCLOUD —Å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–°—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –±–∞–∑–µ Windows 10 + Vagrant + Oracle VM VirtualBox

<aside>
üí° –ù–µ–∫–æ—Ç–æ—Ä–æ–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ: 

–°—Ç–µ–Ω–¥ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–º –ü–ö (–û–ó–£ 16–ì–±), –≥–¥–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ (Nasted VT-x).

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –í–ú. –í –∫–∞—á–µ—Å—Ç–≤–µ –û–° –Ω–∞ –≤—Å–µ—Ö –í–ú –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞ bento/ubuntu-22.04, –∫–æ—Ç–æ—Ä–æ–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–µ–Ω—å—à–µ RAM –¥–ª—è —Ä–∞–±–æ—Ç—ã –í–ú.
–ù–µ–∫–æ—Ç–æ—Ä–æ–µ –ü–û –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–∞—á–∞–Ω–æ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —Å—Ç–µ–Ω–¥–∞, –ª–∏–±–æ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –¥–æ—Å—Ç—É–ø–æ–º.

–î–ª—è –í–ú app1, app2 —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ vagrant –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è **d:\nextcloud.files** (—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ Vagrantfile), –∫–æ—Ç–æ—Ä–æ—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ —Ñ–∞–π–ª–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –ü–û Nextcloud –ø–æ—Å–ª–µ –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏ –ü–û. –°–∞–º –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–≤–æ–ª—å–Ω–æ –µ–º–∫–∏–π –∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —Ä–∞–∑–º–µ—Ä–Ω—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º –Ω–∞ github.

–¢–∞–∫ –∂–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω  grafana-enterprise_11.0.0_amd64.deb - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∏ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞.
–ü–û –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–∞—á–∞—Ç—å –∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ /ansible/files

–†–∞–±–æ—Ç–∞ —Å—Ç–µ–Ω–¥–∞ –∏–º–µ–µ—Ç –Ω–µ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π –≤–∏–¥, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω—ã. –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –¥–æ–≤–µ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç –¥–æ ‚Äú–∫—Ä–∞—Å–∏–≤–æ–≥–æ‚Äù —Å–æ—Å—Ç–æ—è–Ω–∏—è üòü

</aside>

## –°—Ö–µ–º–∞ —Å—Ç–µ–Ω–¥–∞

![web-project-otus.drawio.svg](web-project-otus.drawio.svg)

| Hostname | IP-address | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- |
| ansible | 192.168.10.99 | –í–ú —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| app0 | 192.168.10.11 | –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±–∞–∑–µ NGINX, –∞ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ http —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ https –Ω–∞ –±–∞–∑–µ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. |
| app1 | 192.168.10.21 | –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Nextcloud –Ω–∞ –±–∞–∑–µ Apache + PHP |
| app2 | 192.168.10.22 | –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Nextcloud –Ω–∞ –±–∞–∑–µ Apache + PHP |
| db1 | 192.168.10.31 | master –ë–î –Ω–∞ –±–∞–∑–µ MariaDB |
| db2 | 192.168.10.32 | slave –ë–î –Ω–∞ –±–∞–∑–µ MariaDB |
| mon | 192.168.10.40 | —Å–µ—Ä–≤–∏—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞ –Ω–∞ –±–∞–∑–µ Grafana + Loki + Promtail |
| bak | - | –ò–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∞–º—è—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å–µ—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è - —Å–æ–∑–¥–∞–Ω–∏–µ sql-–¥–∞–º–ø–æ–≤ –ë–î –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |

–ò–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –ü–ö –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DMZ, firewall –∏ –ø—Ä–æ—á–µ–≥–æ —Å —Ç.–∑. –∑–∞—â–∏—Ç—ã.
- –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–æ–≤. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω–∏–µ sql-–¥–∞–º–ø–æ–≤ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.
- –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –°–¥–µ–ª–∞–Ω –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–±—Ä–æ—Å –ø–∞–ø–∫–∏ –≤ vagrant.
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –°–¥–µ–ª–∞–Ω–æ –Ω–µ–∫—Ä–∞—Å–∏–≤–æ - –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è grafana.db —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –¥–∞—à–±–æ—Ä–¥–∞–º–∏ –∏ –∞–ª–ª–µ—Ä—Ç–∏–Ω–≥–æ–º.

## –ó–∞–ø—É—Å–∫

–ó–∞–ø—É—Å–∫ —Å—Ç–µ–Ω–¥–∞ —Ä–∞–∑–±–∏—Ç –Ω–∞ 2 —ç—Ç–∞–ø–∞:

1. –ó–∞–ø—É—Å–∫ –í–ú —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ip-–∞–¥—Ä–µ—Å–∞, –ø—Ä–æ–±—Ä–æ—Å —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞, ssh-–∫–ª—é—á–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–∞–º—è—Ç–∏).

`vagrant up`

2. –ó–∞–ø—É—Å–∫ ansible playbook —Å –í–ú —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤—Å–µ–≥–æ —Å—Ç–µ–Ω–¥–∞.

`cd /ansible
ansible-playbook -i hosts go.yml`

<aside>
üí° –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ vars.yml –∏ hosts
–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –∏–∑–º–µ–Ω—è–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–±—Ä–∞–Ω—ã –≤ hosts –∏ vars.yml.

</aside>

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∑–∞–ø—É—Å–∫–∞ –±—É–¥–µ—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ç–µ–Ω–¥–∞ —Å –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≤ —à—Ç–∞—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å  URL: **http://nc.local**, –Ω–æ –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è resolv-–∞ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ hosts:

```ruby
192.168.10.11  nc.local 
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–≤—à–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º –ø–ª–µ–π–±—É–∫–∞ go.yml**

–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ playbook –Ω–µ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç–µ–Ω–¥–∞ - –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —à—Ç–∞—Ç–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏: 
–Ω–∞–ª–∏—á–∏–µ –ë–î, —Å—Ç—Å–∞—Ç—É—Å–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ —Ç.–ø. 
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ - —ç—Ç–æ –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ - grafana. (–º–æ–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å –∫–∏–¥–∞—è —Ñ–∞–π–ª-—Ñ–ª–∞–≥ –Ω–∞ —Ö–æ—Å—Ç –∏–ª–∏ —É–ø—Ä–∞–≤–ª—è—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π-–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º –∏–ª–∏ —Å–æ–∑–¥–∞–≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–ª–µ–π–±—É–∫)

### –ü–µ—Ä–µ—á–µ–Ω—å —Ä–æ–ª–µ–π:

**provision** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ –ü–û, —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ /etc/hosts 

**monitoring-node** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Promtail, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

**provision-db** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ MariaDB –∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –ü–û, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Å–µ—Ç–∏, –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏.

**replicate-db** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ master –∏ slave, –∑–∞–ø—É—Å–∫ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏.

**nextcloud-db** - —Å–æ–∑–¥–∞–Ω–∏–µ db-user –¥–ª—è Nextcloud, —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã, –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–∞–º–ø–∞.

**app** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ Apache + php, —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ config-—Ñ–∞–π–ª–∞ –¥–ª—è Nextcloud, –∑–∞–ø—É—Å–∫ web-—Å–µ—Ä–≤–µ—Ä–∞

**front** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

**monitoring** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Loki  –∏ Grafana, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

**backup** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ cron —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è —Å–Ω—è—Ç–∏—è –¥–∞–º–ø–∞, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ slave db. 

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–µ–Ω–¥–∞

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–ª–µ–π–±—É–∫–∞ go.yml

‚úÖ Web-—Å–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

‚úÖ –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ HTTPS

‚úÖ –ë–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ –ê–≥–µ–Ω—Ç—ã Promtail —Ä–∞–±–æ—Ç–∞—é—Ç

‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Grafana —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ –ê–ª–µ—Ä—Ç–∏–Ω–≥ –≤ TG —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø–ª–µ–π–±—É–∫–∞ go.yml –Ω–∞ —à—Ç–∞—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–º —Å—Ç–µ–Ω–¥–µ

‚úÖ –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–ª–∏–≤–∫–∞ sql-–¥–∞–º–ø–∞ —Å–∫–∏–ø–∞–µ—Ç—Å—è

‚úÖ–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è (—à–∞–≥–∏ –ø–æ –µ–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–∫–∏–ø–∞—é—Ç—Å—è)

### –£–±–∏–≤–∞–µ–º –í–ú —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

‚úÖ –°–µ—Ä–≤–∏—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Å –Ω—É–ª—è.

‚úÖ –°–µ—Ä–≤–∏—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
* —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Å –Ω—É–ª—è, —Ç.–∫. –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–∞

### –£–±–∏–≤–∞–µ–º –í–ú frontend

‚úÖ –°–µ—Ä–≤–∏—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

### –£–±–∏–≤–∞–µ–º –æ–¥–Ω—É –∏–∑ –í–ú web

‚úÖ –°–µ—Ä–≤–∏—Å –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è.

### –£–±–∏–≤–∞–µ–º –í–ú slave DB

‚úÖ –°–µ—Ä–≤–∏—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

### –£–±–∏–≤–∞–µ–º –í–ú master DB

> –û–±—ã—á–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∞–≤–∞—Ä–∏–µ–π. –ù—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ - –ª–∏–±–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–∞–º–ø–∞, –ª–∏–±–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ slave –≤ master (–º–Ω–µ –∫–∞–∂–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å  —Ä—É—á–∫–∞–º–∏ :) )
> 

–°–æ–∑–¥–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –¥–∞–º–ø –ë–î —Å–æ slave, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–º–ø –ë–î —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–æ cron. –†–∞–∑–º–µ—â–∞–µ–º –µ–≥–æ –ø–æ –º–µ—Å—Ç—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≤ vars.yml
–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (hosts –∏ vars.yml) –∏—Å–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π slave –∏ —É–∫–∞–∑–∞—Ç—å –Ω–æ–≤—ã–π slave db —Ö–æ—Å—Ç. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –æ—Å—Ç–∞–≤–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–∞–∑—ã –ø–µ—Ä–µ–¥ –∫—Ä–∞—Ö–æ–º.

‚úÖ –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–ª–µ–π–±—É–∫–∞ go.yml –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ –ë–î –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å.

---